chrome.runtime.onInstalled.addListener(()=>{const e={kanaType:"hiragana",playOrder:"sequential",playInterval:3,requiredCorrectCount:3};chrome.storage.sync.set({settings:e,mistakes:[],testResults:[]})});async function t(){(await chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"]})).length>0||await chrome.offscreen.createDocument({url:"src/offscreen.html",reasons:["AUDIO_PLAYBACK"],justification:"用于播放日语50音图的读音"})}chrome.runtime.onMessage.addListener((e,n,r)=>{if(e.action==="playAudio")return t().then(()=>{chrome.runtime.sendMessage({target:"offscreen",action:"playAudio",romaji:e.romaji})}),!0});
