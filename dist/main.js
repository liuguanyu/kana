var Qt=Object.defineProperty;var $t=(t,e,n)=>e in t?Qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fe=(t,e,n)=>$t(t,typeof e!="symbol"?e+"":e,n);import"./modulepreload-polyfill.js";function N(){}function Le(t,e){for(const n in e)t[n]=e[n];return t}function St(t){return t()}function tt(){return Object.create(null)}function x(t){t.forEach(St)}function Ue(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ut(t){return Object.keys(t).length===0}function Be(t,...e){if(t==null){for(const a of e)a(void 0);return N}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function je(t){let e;return Be(t,n=>e=n)(),e}function Bt(t,e,n){t.$$.on_destroy.push(Be(e,n))}function ke(t){return t??""}function o(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Me(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function g(){return z(" ")}function Xe(){return z("")}function Q(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pe(t){return t===""?null:+t}function Xt(t){return Array.from(t.childNodes)}function P(t,e){e=""+e,t.data!==e&&(t.data=e)}function ae(t,e){t.value=e??""}function nt(t,e,n,a){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Se(t,e,n){for(let a=0;a<t.options.length;a+=1){const l=t.options[a];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function at(t){const e=t.querySelector(":checked");return e&&e.__value}function Yt(t,e,{bubbles:n=!1,cancelable:a=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:a})}function Ae(t,e){return new t(e)}let Te;function ze(t){Te=t}function He(){if(!Te)throw new Error("Function called outside component initialization");return Te}function Oe(t){He().$$.on_mount.push(t)}function Vt(t){He().$$.after_update.push(t)}function Rt(t){He().$$.on_destroy.push(t)}function Wt(){const t=He();return(e,n,{cancelable:a=!1}={})=>{const l=t.$$.callbacks[e];if(l){const r=Yt(e,n,{cancelable:a});return l.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}function lt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(a=>a.call(this,e))}const he=[],st=[];let be=[];const ot=[],Lt=Promise.resolve();let $e=!1;function Pt(){$e||($e=!0,Lt.then(Dt))}function At(){return Pt(),Lt}function Ee(t){be.push(t)}const Qe=new Set;let _e=0;function Dt(){if(_e!==0)return;const t=Te;do{try{for(;_e<he.length;){const e=he[_e];_e++,ze(e),Gt(e.$$)}}catch(e){throw he.length=0,_e=0,e}for(ze(null),he.length=0,_e=0;st.length;)st.pop()();for(let e=0;e<be.length;e+=1){const n=be[e];Qe.has(n)||(Qe.add(n),n())}be.length=0}while(he.length);for(;ot.length;)ot.pop()();$e=!1,Qe.clear(),ze(t)}function Gt(t){if(t.fragment!==null){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ee)}}function Jt(t){const e=[],n=[];be.forEach(a=>t.indexOf(a)===-1?e.push(a):n.push(a)),n.forEach(a=>a()),be=e}const Re=new Set;let ce;function Ye(){ce={r:0,c:[],p:ce}}function Ve(){ce.r||x(ce.c),ce=ce.p}function le(t,e){t&&t.i&&(Re.delete(t),t.i(e))}function ie(t,e,n,a){if(t&&t.o){if(Re.has(t))return;Re.add(t),ce.c.push(()=>{Re.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}else a&&a()}function ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function De(t,e){const n={},a={},l={$$scope:1};let r=t.length;for(;r--;){const i=t[r],s=e[r];if(s){for(const u in i)u in s||(a[u]=1);for(const u in s)l[u]||(n[u]=s[u],l[u]=1);t[r]=s}else for(const u in i)l[u]=1}for(const i in a)i in n||(n[i]=void 0);return n}function Ne(t){return typeof t=="object"&&t!==null?t:{}}function ge(t){t&&t.c()}function me(t,e,n){const{fragment:a,after_update:l}=t.$$;a&&a.m(e,n),Ee(()=>{const r=t.$$.on_mount.map(St).filter(Ue);t.$$.on_destroy?t.$$.on_destroy.push(...r):x(r),t.$$.on_mount=[]}),l.forEach(Ee)}function de(t,e){const n=t.$$;n.fragment!==null&&(Jt(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Zt(t,e){t.$$.dirty[0]===-1&&(he.push(t),Pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function re(t,e,n,a,l,r,i=null,s=[-1]){const u=Te;ze(t);const c=t.$$={fragment:null,ctx:[],props:r,update:N,not_equal:l,bound:tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:tt(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};i&&i(c.root);let m=!1;if(c.ctx=n?n(t,e.props||{},(k,y,...w)=>{const C=w.length?w[0]:y;return c.ctx&&l(c.ctx[k],c.ctx[k]=C)&&(!c.skip_bound&&c.bound[k]&&c.bound[k](C),m&&Zt(t,k)),y}):[],c.update(),m=!0,x(c.before_update),c.fragment=a?a(c.ctx):!1,e.target){if(e.hydrate){const k=Xt(e.target);c.fragment&&c.fragment.l(k),k.forEach(E)}else c.fragment&&c.fragment.c();e.intro&&le(t.$$.fragment),me(t,e.target,e.anchor),Dt()}ze(u)}class ue{constructor(){Fe(this,"$$");Fe(this,"$$set")}$destroy(){de(this,1),this.$destroy=N}$on(e,n){if(!Ue(n))return N;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(n),()=>{const l=a.indexOf(n);l!==-1&&a.splice(l,1)}}$set(e){this.$$set&&!Ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xt);const ve=[];function Nt(t,e){return{subscribe:qe(t,e).subscribe}}function qe(t,e=N){let n;const a=new Set;function l(s){if(se(t,s)&&(t=s,n)){const u=!ve.length;for(const c of a)c[1](),ve.push(c,t);if(u){for(let c=0;c<ve.length;c+=2)ve[c][0](ve[c+1]);ve.length=0}}}function r(s){l(s(t))}function i(s,u=N){const c=[s,u];return a.add(c),a.size===1&&(n=e(l,r)||N),s(t),()=>{a.delete(c),a.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:i}}function Kt(t,e,n){const a=!Array.isArray(t),l=a?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Nt(n,(i,s)=>{let u=!1;const c=[];let m=0,k=N;const y=()=>{if(m)return;k();const C=e(a?c[0]:c,i,s);r?i(C):k=Ue(C)?C:N},w=l.map((C,T)=>Be(C,O=>{c[T]=O,m&=~(1<<T),u&&y()},()=>{m|=1<<T}));return u=!0,y(),function(){x(w),k(),u=!1}})}function en(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,a,l,r,i=[],s="",u=t.split("/");for(u[0]||u.shift();l=u.shift();)n=l[0],n==="*"?(i.push("wild"),s+="/(.*)"):n===":"?(a=l.indexOf("?",1),r=l.indexOf(".",1),i.push(l.substring(1,~a?a:~r?r:l.length)),s+=~a&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(s+=(~a?"?":"")+"\\"+l.substring(r))):s+="/"+l;return{keys:i,pattern:new RegExp("^"+s+"/?$","i")}}function tn(t){let e,n,a;const l=[t[2]];var r=t[0];function i(s,u){let c={};for(let m=0;m<l.length;m+=1)c=Le(c,l[m]);return u!==void 0&&u&4&&(c=Le(c,De(l,[Ne(s[2])]))),{props:c}}return r&&(e=Ae(r,i(t)),e.$on("routeEvent",t[7])),{c(){e&&ge(e.$$.fragment),n=Xe()},m(s,u){e&&me(e,s,u),M(s,n,u),a=!0},p(s,u){if(u&1&&r!==(r=s[0])){if(e){Ye();const c=e;ie(c.$$.fragment,1,0,()=>{de(c,1)}),Ve()}r?(e=Ae(r,i(s,u)),e.$on("routeEvent",s[7]),ge(e.$$.fragment),le(e.$$.fragment,1),me(e,n.parentNode,n)):e=null}else if(r){const c=u&4?De(l,[Ne(s[2])]):{};e.$set(c)}},i(s){a||(e&&le(e.$$.fragment,s),a=!0)},o(s){e&&ie(e.$$.fragment,s),a=!1},d(s){s&&E(n),e&&de(e,s)}}}function nn(t){let e,n,a;const l=[{params:t[1]},t[2]];var r=t[0];function i(s,u){let c={};for(let m=0;m<l.length;m+=1)c=Le(c,l[m]);return u!==void 0&&u&6&&(c=Le(c,De(l,[u&2&&{params:s[1]},u&4&&Ne(s[2])]))),{props:c}}return r&&(e=Ae(r,i(t)),e.$on("routeEvent",t[6])),{c(){e&&ge(e.$$.fragment),n=Xe()},m(s,u){e&&me(e,s,u),M(s,n,u),a=!0},p(s,u){if(u&1&&r!==(r=s[0])){if(e){Ye();const c=e;ie(c.$$.fragment,1,0,()=>{de(c,1)}),Ve()}r?(e=Ae(r,i(s,u)),e.$on("routeEvent",s[6]),ge(e.$$.fragment),le(e.$$.fragment,1),me(e,n.parentNode,n)):e=null}else if(r){const c=u&6?De(l,[u&2&&{params:s[1]},u&4&&Ne(s[2])]):{};e.$set(c)}},i(s){a||(e&&le(e.$$.fragment,s),a=!0)},o(s){e&&ie(e.$$.fragment,s),a=!1},d(s){s&&E(n),e&&de(e,s)}}}function an(t){let e,n,a,l;const r=[nn,tn],i=[];function s(u,c){return u[1]?0:1}return e=s(t),n=i[e]=r[e](t),{c(){n.c(),a=Xe()},m(u,c){i[e].m(u,c),M(u,a,c),l=!0},p(u,[c]){let m=e;e=s(u),e===m?i[e].p(u,c):(Ye(),ie(i[m],1,1,()=>{i[m]=null}),Ve(),n=i[e],n?n.p(u,c):(n=i[e]=r[e](u),n.c()),le(n,1),n.m(a.parentNode,a))},i(u){l||(le(n),l=!0)},o(u){ie(n),l=!1},d(u){u&&E(a),i[e].d(u)}}}function it(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let a="";return n>-1&&(a=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:a}}const We=Nt(null,function(e){e(it());const n=()=>{e(it())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),ln=Kt(We,t=>t.location);Kt(We,t=>t.querystring);const rt=qe(void 0);async function ut(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await At(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function sn(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function on(t,e,n){let{routes:a={}}=e,{prefix:l=""}=e,{restoreScrollState:r=!1}=e;class i{constructor(_,v){if(!v||typeof v!="function"&&(typeof v!="object"||v._sveltesparouter!==!0))throw Error("Invalid component object");if(!_||typeof _=="string"&&(_.length<1||_.charAt(0)!="/"&&_.charAt(0)!="*")||typeof _=="object"&&!(_ instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:b,keys:p}=en(_);this.path=_,typeof v=="object"&&v._sveltesparouter===!0?(this.component=v.component,this.conditions=v.conditions||[],this.userData=v.userData,this.props=v.props||{}):(this.component=()=>Promise.resolve(v),this.conditions=[],this.props={}),this._pattern=b,this._keys=p}match(_){if(l){if(typeof l=="string")if(_.startsWith(l))_=_.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const j=_.match(l);if(j&&j[0])_=_.substr(j[0].length)||"/";else return null}}const v=this._pattern.exec(_);if(v===null)return null;if(this._keys===!1)return v;const b={};let p=0;for(;p<this._keys.length;){try{b[this._keys[p]]=decodeURIComponent(v[p+1]||"")||null}catch{b[this._keys[p]]=null}p++}return b}async checkConditions(_){for(let v=0;v<this.conditions.length;v++)if(!await this.conditions[v](_))return!1;return!0}}const s=[];a instanceof Map?a.forEach((h,_)=>{s.push(new i(_,h))}):Object.keys(a).forEach(h=>{s.push(new i(h,a[h]))});let u=null,c=null,m={};const k=Wt();async function y(h,_){await At(),k(h,_)}let w=null,C=null;r&&(C=h=>{h.state&&(h.state.__svelte_spa_router_scrollY||h.state.__svelte_spa_router_scrollX)?w=h.state:w=null},window.addEventListener("popstate",C),Vt(()=>{sn(w)}));let T=null,O=null;const S=We.subscribe(async h=>{T=h;let _=0;for(;_<s.length;){const v=s[_].match(h.location);if(!v){_++;continue}const b={route:s[_].path,location:h.location,querystring:h.querystring,userData:s[_].userData,params:v&&typeof v=="object"&&Object.keys(v).length?v:null};if(!await s[_].checkConditions(b)){n(0,u=null),O=null,y("conditionsFailed",b);return}y("routeLoading",Object.assign({},b));const p=s[_].component;if(O!=p){p.loading?(n(0,u=p.loading),O=p,n(1,c=p.loadingParams),n(2,m={}),y("routeLoaded",Object.assign({},b,{component:u,name:u.name,params:c}))):(n(0,u=null),O=null);const j=await p();if(h!=T)return;n(0,u=j&&j.default||j),O=p}v&&typeof v=="object"&&Object.keys(v).length?n(1,c=v):n(1,c=null),n(2,m=s[_].props),y("routeLoaded",Object.assign({},b,{component:u,name:u.name,params:c})).then(()=>{rt.set(c)});return}n(0,u=null),O=null,rt.set(void 0)});Rt(()=>{S(),C&&window.removeEventListener("popstate",C)});function R(h){lt.call(this,t,h)}function L(h){lt.call(this,t,h)}return t.$$set=h=>{"routes"in h&&n(3,a=h.routes),"prefix"in h&&n(4,l=h.prefix),"restoreScrollState"in h&&n(5,r=h.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=r?"manual":"auto")},[u,c,m,a,l,r,R,L]}class rn extends ue{constructor(e){super(),re(this,e,on,an,se,{routes:3,prefix:4,restoreScrollState:5})}}function Ce(t){if(!t)throw Error("Parameter args is required");if(!t.component==!t.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(t.component&&(t.asyncComponent=()=>Promise.resolve(t.component)),typeof t.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(t.conditions){Array.isArray(t.conditions)||(t.conditions=[t.conditions]);for(let n=0;n<t.conditions.length;n++)if(!t.conditions[n]||typeof t.conditions[n]!="function")throw Error("Invalid parameter conditions["+n+"]")}return t.loadingComponent&&(t.asyncComponent.loading=t.loadingComponent,t.asyncComponent.loadingParams=t.loadingParams||void 0),{component:t.asyncComponent,userData:t.userData,conditions:t.conditions&&t.conditions.length?t.conditions:void 0,props:t.props&&Object.keys(t.props).length?t.props:{},_sveltesparouter:!0}}function ct(t,e,n){const a=t.slice();return a[4]=e[n],a}function ft(t){let e,n,a,l,r,i,s,u;function c(){return t[2](t[4])}function m(...k){return t[3](t[4],...k)}return{c(){e=f("button"),n=f("div"),n.textContent=`${t[4].icon}`,a=g(),l=f("div"),l.textContent=`${t[4].label}`,r=g(),d(n,"class","nav-icon svelte-1n6d0l6"),d(l,"class","nav-label svelte-1n6d0l6"),d(e,"type","button"),d(e,"class",i="nav-item "+(t[0]===t[4].path?"active":"")+" svelte-1n6d0l6"),d(e,"aria-label",t[4].label)},m(k,y){M(k,e,y),o(e,n),o(e,a),o(e,l),o(e,r),s||(u=[Q(e,"click",c),Q(e,"keydown",m)],s=!0)},p(k,y){t=k,y&1&&i!==(i="nav-item "+(t[0]===t[4].path?"active":"")+" svelte-1n6d0l6")&&d(e,"class",i)},d(k){k&&E(e),s=!1,x(u)}}}function un(t){let e,n=ne(t[1]),a=[];for(let l=0;l<n.length;l+=1)a[l]=ft(ct(t,n,l));return{c(){e=f("nav");for(let l=0;l<a.length;l+=1)a[l].c();d(e,"class","svelte-1n6d0l6")},m(l,r){M(l,e,r);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null)},p(l,[r]){if(r&3){n=ne(l[1]);let i;for(i=0;i<n.length;i+=1){const s=ct(l,n,i);a[i]?a[i].p(s,r):(a[i]=ft(s),a[i].c(),a[i].m(e,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=n.length}},i:N,o:N,d(l){l&&E(e),Me(a,l)}}}function cn(t,e,n){let a;return Bt(t,ln,s=>n(0,a=s)),[a,[{path:"/",label:"设置",icon:"⚙️"},{path:"/play",label:"播放",icon:"▶️"},{path:"/test",label:"测试",icon:"📝"},{path:"/ranking",label:"排名",icon:"🏆"},{path:"/review",label:"复习",icon:"🔄"}],s=>ut(s.path),(s,u)=>u.key==="Enter"&&ut(s.path)]}class fn extends ue{constructor(e){super(),re(this,e,cn,un,se,{})}}const mt=[{kana:"あ",romaji:"a"},{kana:"い",romaji:"i"},{kana:"う",romaji:"u"},{kana:"え",romaji:"e"},{kana:"お",romaji:"o"},{kana:"か",romaji:"ka"},{kana:"き",romaji:"ki"},{kana:"く",romaji:"ku"},{kana:"け",romaji:"ke"},{kana:"こ",romaji:"ko"},{kana:"さ",romaji:"sa"},{kana:"し",romaji:"shi"},{kana:"す",romaji:"su"},{kana:"せ",romaji:"se"},{kana:"そ",romaji:"so"},{kana:"た",romaji:"ta"},{kana:"ち",romaji:"chi"},{kana:"つ",romaji:"tsu"},{kana:"て",romaji:"te"},{kana:"と",romaji:"to"},{kana:"な",romaji:"na"},{kana:"に",romaji:"ni"},{kana:"ぬ",romaji:"nu"},{kana:"ね",romaji:"ne"},{kana:"の",romaji:"no"},{kana:"は",romaji:"ha"},{kana:"ひ",romaji:"hi"},{kana:"ふ",romaji:"fu"},{kana:"へ",romaji:"he"},{kana:"ほ",romaji:"ho"},{kana:"ま",romaji:"ma"},{kana:"み",romaji:"mi"},{kana:"む",romaji:"mu"},{kana:"め",romaji:"me"},{kana:"も",romaji:"mo"},{kana:"や",romaji:"ya"},{kana:"ゆ",romaji:"yu"},{kana:"よ",romaji:"yo"},{kana:"ら",romaji:"ra"},{kana:"り",romaji:"ri"},{kana:"る",romaji:"ru"},{kana:"れ",romaji:"re"},{kana:"ろ",romaji:"ro"},{kana:"わ",romaji:"wa"},{kana:"を",romaji:"wo"},{kana:"ん",romaji:"n"},{kana:"が",romaji:"ga"},{kana:"ぎ",romaji:"gi"},{kana:"ぐ",romaji:"gu"},{kana:"げ",romaji:"ge"},{kana:"ご",romaji:"go"},{kana:"ざ",romaji:"za"},{kana:"じ",romaji:"ji"},{kana:"ず",romaji:"zu"},{kana:"ぜ",romaji:"ze"},{kana:"ぞ",romaji:"zo"},{kana:"だ",romaji:"da"},{kana:"で",romaji:"de"},{kana:"ど",romaji:"do"},{kana:"ば",romaji:"ba"},{kana:"び",romaji:"bi"},{kana:"ぶ",romaji:"bu"},{kana:"べ",romaji:"be"},{kana:"ぼ",romaji:"bo"},{kana:"ぱ",romaji:"pa"},{kana:"ぴ",romaji:"pi"},{kana:"ぷ",romaji:"pu"},{kana:"ぺ",romaji:"pe"},{kana:"ぽ",romaji:"po"},{kana:"きゃ",romaji:"kya"},{kana:"きゅ",romaji:"kyu"},{kana:"きょ",romaji:"kyo"},{kana:"しゃ",romaji:"sha"},{kana:"しゅ",romaji:"shu"},{kana:"しょ",romaji:"sho"},{kana:"ちゃ",romaji:"cha"},{kana:"ちゅ",romaji:"chu"},{kana:"ちょ",romaji:"cho"},{kana:"にゃ",romaji:"nya"},{kana:"にゅ",romaji:"nyu"},{kana:"にょ",romaji:"nyo"},{kana:"ひゃ",romaji:"hya"},{kana:"ひゅ",romaji:"hyu"},{kana:"ひょ",romaji:"hyo"},{kana:"みゃ",romaji:"mya"},{kana:"みゅ",romaji:"myu"},{kana:"みょ",romaji:"myo"},{kana:"りゃ",romaji:"rya"},{kana:"りゅ",romaji:"ryu"},{kana:"りょ",romaji:"ryo"},{kana:"ぎゃ",romaji:"gya"},{kana:"ぎゅ",romaji:"gyu"},{kana:"ぎょ",romaji:"gyo"},{kana:"じゃ",romaji:"ja"},{kana:"じゅ",romaji:"ju"},{kana:"じょ",romaji:"jo"},{kana:"びゃ",romaji:"bya"},{kana:"びゅ",romaji:"byu"},{kana:"びょ",romaji:"byo"},{kana:"ぴゃ",romaji:"pya"},{kana:"ぴゅ",romaji:"pyu"},{kana:"ぴょ",romaji:"pyo"}],dt=[{kana:"ア",romaji:"a"},{kana:"イ",romaji:"i"},{kana:"ウ",romaji:"u"},{kana:"エ",romaji:"e"},{kana:"オ",romaji:"o"},{kana:"カ",romaji:"ka"},{kana:"キ",romaji:"ki"},{kana:"ク",romaji:"ku"},{kana:"ケ",romaji:"ke"},{kana:"コ",romaji:"ko"},{kana:"サ",romaji:"sa"},{kana:"シ",romaji:"shi"},{kana:"ス",romaji:"su"},{kana:"セ",romaji:"se"},{kana:"ソ",romaji:"so"},{kana:"タ",romaji:"ta"},{kana:"チ",romaji:"chi"},{kana:"ツ",romaji:"tsu"},{kana:"テ",romaji:"te"},{kana:"ト",romaji:"to"},{kana:"ナ",romaji:"na"},{kana:"ニ",romaji:"ni"},{kana:"ヌ",romaji:"nu"},{kana:"ネ",romaji:"ne"},{kana:"ノ",romaji:"no"},{kana:"ハ",romaji:"ha"},{kana:"ヒ",romaji:"hi"},{kana:"フ",romaji:"fu"},{kana:"ヘ",romaji:"he"},{kana:"ホ",romaji:"ho"},{kana:"マ",romaji:"ma"},{kana:"ミ",romaji:"mi"},{kana:"ム",romaji:"mu"},{kana:"メ",romaji:"me"},{kana:"モ",romaji:"mo"},{kana:"ヤ",romaji:"ya"},{kana:"ユ",romaji:"yu"},{kana:"ヨ",romaji:"yo"},{kana:"ラ",romaji:"ra"},{kana:"リ",romaji:"ri"},{kana:"ル",romaji:"ru"},{kana:"レ",romaji:"re"},{kana:"ロ",romaji:"ro"},{kana:"ワ",romaji:"wa"},{kana:"ヲ",romaji:"wo"},{kana:"ン",romaji:"n"},{kana:"ガ",romaji:"ga"},{kana:"ギ",romaji:"gi"},{kana:"グ",romaji:"gu"},{kana:"ゲ",romaji:"ge"},{kana:"ゴ",romaji:"go"},{kana:"ザ",romaji:"za"},{kana:"ジ",romaji:"ji"},{kana:"ズ",romaji:"zu"},{kana:"ゼ",romaji:"ze"},{kana:"ゾ",romaji:"zo"},{kana:"ダ",romaji:"da"},{kana:"デ",romaji:"de"},{kana:"ド",romaji:"do"},{kana:"バ",romaji:"ba"},{kana:"ビ",romaji:"bi"},{kana:"ブ",romaji:"bu"},{kana:"ベ",romaji:"be"},{kana:"ボ",romaji:"bo"},{kana:"パ",romaji:"pa"},{kana:"ピ",romaji:"pi"},{kana:"プ",romaji:"pu"},{kana:"ペ",romaji:"pe"},{kana:"ポ",romaji:"po"},{kana:"キャ",romaji:"kya"},{kana:"キュ",romaji:"kyu"},{kana:"キョ",romaji:"kyo"},{kana:"シャ",romaji:"sha"},{kana:"シュ",romaji:"shu"},{kana:"ショ",romaji:"sho"},{kana:"チャ",romaji:"cha"},{kana:"チュ",romaji:"chu"},{kana:"チョ",romaji:"cho"},{kana:"ニャ",romaji:"nya"},{kana:"ニュ",romaji:"nyu"},{kana:"ニョ",romaji:"nyo"},{kana:"ヒャ",romaji:"hya"},{kana:"ヒュ",romaji:"hyu"},{kana:"ヒョ",romaji:"hyo"},{kana:"ミャ",romaji:"mya"},{kana:"ミュ",romaji:"myu"},{kana:"ミョ",romaji:"myo"},{kana:"リャ",romaji:"rya"},{kana:"リュ",romaji:"ryu"},{kana:"リョ",romaji:"ryo"},{kana:"ギャ",romaji:"gya"},{kana:"ギュ",romaji:"gyu"},{kana:"ギョ",romaji:"gyo"},{kana:"ジャ",romaji:"ja"},{kana:"ジュ",romaji:"ju"},{kana:"ジョ",romaji:"jo"},{kana:"ビャ",romaji:"bya"},{kana:"ビュ",romaji:"byu"},{kana:"ビョ",romaji:"byo"},{kana:"ピャ",romaji:"pya"},{kana:"ピュ",romaji:"pyu"},{kana:"ピョ",romaji:"pyo"}],mn={kanaType:"hiragana",playOrder:"sequential",playInterval:3,requiredCorrectCount:3},ye=qe(mn),oe=qe([]),fe=qe([]),Ht=async()=>{try{const t=await chrome.storage.sync.get(["settings","mistakes","testResults"]);t.settings&&ye.set(t.settings),t.mistakes&&oe.set(t.mistakes),t.testResults&&fe.set(t.testResults)}catch(t){console.error("加载数据失败:",t)}},dn=async t=>{ye.set(t);try{await chrome.storage.sync.set({settings:t})}catch(e){console.error("保存设置失败:",e)}},Ke=t=>t==="hiragana"?mt:t==="katakana"?dt:[...mt,...dt],Ge=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e},Ft=(t,e,n=4)=>{const a=[t],l=e.filter(r=>r.romaji!==t.romaji);for(;a.length<n&&l.length>0;){const r=Math.floor(Math.random()*l.length),i=l.splice(r,1)[0];a.push(i)}return Ge(a)},pn=async t=>{const e=je(oe),n=e.findIndex(a=>a.kana===t.kana&&a.romaji===t.romaji);if(n>=0){const a=[...e];a[n].correctCount=0,oe.set(a)}else{const a={...t,correctCount:0};oe.set([...e,a])}try{await chrome.storage.sync.set({mistakes:je(oe)})}catch(a){console.error("保存错题失败:",a)}},kn=async t=>{const n=je(oe).filter(a=>!(a.kana===t.kana&&a.romaji===t.romaji));oe.set(n);try{await chrome.storage.sync.set({mistakes:n})}catch(a){console.error("移除错题失败:",a)}},_n=async t=>{const e={...t,timestamp:Date.now()},n=je(fe);fe.set([...n,e]);try{await chrome.storage.sync.set({testResults:je(fe)})}catch(a){console.error("保存测试结果失败:",a)}},vn=async t=>{const n=je(fe).filter(a=>a.timestamp!==t);fe.set(n);try{await chrome.storage.sync.set({testResults:n})}catch(a){console.error("删除测试结果失败:",a)}};Ht();function hn(t){let e;return{c(){e=f("div"),e.textContent="加载中...",d(e,"class","loading svelte-1gsshlz")},m(n,a){M(n,e,a)},p:N,d(n){n&&E(e)}}}function bn(t){let e,n,a,l,r,i,s,u,c,m,k,y,w,C,T,O,S,R,L,h,_,v,b,p,j,q,I,A,H,W,B,V,F=t[1]&&pt(t);return{c(){e=f("div"),n=f("div"),a=f("label"),a.textContent="假名类型",l=g(),r=f("select"),i=f("option"),i.textContent="平假名",s=f("option"),s.textContent="片假名",u=f("option"),u.textContent="全部",c=g(),m=f("div"),k=f("label"),k.textContent="播放模式",y=g(),w=f("select"),C=f("option"),C.textContent="顺序播放",T=f("option"),T.textContent="随机播放",O=g(),S=f("div"),R=f("label"),R.textContent="播放间隔（秒）",L=g(),h=f("input"),_=g(),v=f("div"),b=f("label"),b.textContent="错题重现次数（连续正确）",p=g(),j=f("input"),q=g(),I=f("button"),I.textContent="保存设置",A=g(),F&&F.c(),H=g(),W=f("div"),W.innerHTML='<h3 class="svelte-1gsshlz">使用说明</h3> <ul class="svelte-1gsshlz"><li class="svelte-1gsshlz"><strong>播放模式：</strong> 在&quot;播放&quot;页面学习假名发音和写法</li> <li class="svelte-1gsshlz"><strong>测试模式：</strong> 听发音选择正确的假名，错题会自动记录</li> <li class="svelte-1gsshlz"><strong>排名：</strong> 查看历史测试成绩排名</li> <li class="svelte-1gsshlz"><strong>复习：</strong> 专门练习错题，连续答对指定次数后从错题库移除</li></ul>',d(a,"for","kanaType"),i.__value="hiragana",ae(i,i.__value),s.__value="katakana",ae(s,s.__value),u.__value="both",ae(u,u.__value),d(r,"id","kanaType"),t[0].kanaType===void 0&&Ee(()=>t[3].call(r)),d(n,"class","form-group"),d(k,"for","playOrder"),C.__value="sequential",ae(C,C.__value),T.__value="random",ae(T,T.__value),d(w,"id","playOrder"),t[0].playOrder===void 0&&Ee(()=>t[4].call(w)),d(m,"class","form-group"),d(R,"for","playInterval"),d(h,"type","number"),d(h,"id","playInterval"),d(h,"min","1"),d(h,"max","10"),d(h,"step","1"),d(S,"class","form-group"),d(b,"for","requiredCorrectCount"),d(j,"type","number"),d(j,"id","requiredCorrectCount"),d(j,"min","1"),d(j,"max","10"),d(j,"step","1"),d(v,"class","form-group"),d(e,"class","card"),d(W,"class","card info-card svelte-1gsshlz")},m(K,X){M(K,e,X),o(e,n),o(n,a),o(n,l),o(n,r),o(r,i),o(r,s),o(r,u),Se(r,t[0].kanaType,!0),o(e,c),o(e,m),o(m,k),o(m,y),o(m,w),o(w,C),o(w,T),Se(w,t[0].playOrder,!0),o(e,O),o(e,S),o(S,R),o(S,L),o(S,h),ae(h,t[0].playInterval),o(e,_),o(e,v),o(v,b),o(v,p),o(v,j),ae(j,t[0].requiredCorrectCount),o(e,q),o(e,I),o(e,A),F&&F.m(e,null),M(K,H,X),M(K,W,X),B||(V=[Q(r,"change",t[3]),Q(w,"change",t[4]),Q(h,"input",t[5]),Q(j,"input",t[6]),Q(I,"click",t[2])],B=!0)},p(K,X){X&1&&Se(r,K[0].kanaType),X&1&&Se(w,K[0].playOrder),X&1&&Pe(h.value)!==K[0].playInterval&&ae(h,K[0].playInterval),X&1&&Pe(j.value)!==K[0].requiredCorrectCount&&ae(j,K[0].requiredCorrectCount),K[1]?F?F.p(K,X):(F=pt(K),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(K){K&&(E(e),E(H),E(W)),F&&F.d(),B=!1,x(V)}}}function pt(t){let e,n;return{c(){e=f("div"),n=z(t[1]),d(e,"class","success-message svelte-1gsshlz")},m(a,l){M(a,e,l),o(e,n)},p(a,l){l&2&&P(n,a[1])},d(a){a&&E(e)}}}function jn(t){let e,n,a;function l(s,u){return s[0]?bn:hn}let r=l(t),i=r(t);return{c(){e=f("div"),n=f("h2"),n.textContent="50音图学习设置",a=g(),i.c(),d(n,"class","svelte-1gsshlz"),d(e,"class","settings-container svelte-1gsshlz")},m(s,u){M(s,e,u),o(e,n),o(e,a),i.m(e,null)},p(s,[u]){r===(r=l(s))&&i?i.p(s,u):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},i:N,o:N,d(s){s&&E(e),i.d()}}}function gn(t,e,n){let a,l="";Oe(async()=>{await Ht();const m=ye.subscribe(k=>{n(0,a={...k})});return()=>{m()}});async function r(){await dn(a),n(1,l="设置已保存"),setTimeout(()=>{n(1,l="")},3e3)}function i(){a.kanaType=at(this),n(0,a)}function s(){a.playOrder=at(this),n(0,a)}function u(){a.playInterval=Pe(this.value),n(0,a)}function c(){a.requiredCorrectCount=Pe(this.value),n(0,a)}return[a,l,r,i,s,u,c]}class yn extends ue{constructor(e){super(),re(this,e,gn,jn,se,{})}}function wn(t){let e;return{c(){e=f("div"),e.textContent="加载中...",d(e,"class","loading svelte-1i5705a")},m(n,a){M(n,e,a)},p:N,d(n){n&&E(e)}}}function Cn(t){var J,pe,we,Ie;let e,n,a,l,r=t[2]+1+"",i,s,u=t[1].length+"",c,m,k,y,w,C,T,O,S,R,L,h,_=((J=t[0])==null?void 0:J.kanaType)==="hiragana"?"平假名":((pe=t[0])==null?void 0:pe.kanaType)==="katakana"?"片假名":"全部",v,b,p,j,q=((we=t[0])==null?void 0:we.playOrder)==="sequential"?"顺序":"随机",I,A,H,W,B=((Ie=t[0])==null?void 0:Ie.playInterval)+"",V,F,K,X;function G(D,U){return D[4]?Tn:zn}let ee=G(t),Y=ee(t);function te(D,U){return D[5]?Mn:En}let Z=te(t),$=Z(t);return{c(){e=f("div"),n=f("div"),Y.c(),a=g(),l=f("div"),i=z(r),s=z(" / "),c=z(u),m=g(),k=f("div"),y=f("button"),y.innerHTML='<span class="material-icons">volume_up</span> <span class="tooltip-text svelte-1i5705a">播放读音</span>',w=g(),C=f("button"),$.c(),T=g(),O=f("button"),O.innerHTML='<span class="material-icons">skip_next</span> <span class="tooltip-text svelte-1i5705a">下一个</span>',S=g(),R=f("div"),L=f("p"),h=z("当前模式: "),v=z(_),b=g(),p=f("p"),j=z("播放方式: "),I=z(q),A=g(),H=f("p"),W=z("播放间隔: "),V=z(B),F=z("秒"),d(n,"class","kana-card svelte-1i5705a"),d(l,"class","progress svelte-1i5705a"),d(e,"class","kana-display svelte-1i5705a"),d(y,"class","sound-btn tooltip svelte-1i5705a"),d(C,"class","play-btn tooltip svelte-1i5705a"),d(O,"class","next-btn tooltip svelte-1i5705a"),d(k,"class","controls svelte-1i5705a"),d(L,"class","svelte-1i5705a"),d(p,"class","svelte-1i5705a"),d(H,"class","svelte-1i5705a"),d(R,"class","settings-info svelte-1i5705a")},m(D,U){M(D,e,U),o(e,n),Y.m(n,null),o(e,a),o(e,l),o(l,i),o(l,s),o(l,c),M(D,m,U),M(D,k,U),o(k,y),o(k,w),o(k,C),$.m(C,null),o(k,T),o(k,O),M(D,S,U),M(D,R,U),o(R,L),o(L,h),o(L,v),o(R,b),o(R,p),o(p,j),o(p,I),o(R,A),o(R,H),o(H,W),o(H,V),o(H,F),K||(X=[Q(y,"click",t[8]),Q(C,"click",t[7]),Q(O,"click",t[6])],K=!0)},p(D,U){var Je,Ze,xe,et;ee===(ee=G(D))&&Y?Y.p(D,U):(Y.d(1),Y=ee(D),Y&&(Y.c(),Y.m(n,null))),U&4&&r!==(r=D[2]+1+"")&&P(i,r),U&2&&u!==(u=D[1].length+"")&&P(c,u),Z!==(Z=te(D))&&($.d(1),$=Z(D),$&&($.c(),$.m(C,null))),U&1&&_!==(_=((Je=D[0])==null?void 0:Je.kanaType)==="hiragana"?"平假名":((Ze=D[0])==null?void 0:Ze.kanaType)==="katakana"?"片假名":"全部")&&P(v,_),U&1&&q!==(q=((xe=D[0])==null?void 0:xe.playOrder)==="sequential"?"顺序":"随机")&&P(I,q),U&1&&B!==(B=((et=D[0])==null?void 0:et.playInterval)+"")&&P(V,B)},d(D){D&&(E(e),E(m),E(k),E(S),E(R)),Y.d(),$.d(),K=!1,x(X)}}}function zn(t){let e,n,a,l=t[3].romaji+"",r;return{c(){e=f("div"),e.textContent="?",n=g(),a=f("div"),r=z(l),d(e,"class","kana placeholder svelte-1i5705a"),d(a,"class","romaji svelte-1i5705a")},m(i,s){M(i,e,s),M(i,n,s),M(i,a,s),o(a,r)},p(i,s){s&8&&l!==(l=i[3].romaji+"")&&P(r,l)},d(i){i&&(E(e),E(n),E(a))}}}function Tn(t){let e,n=t[3].kana+"",a,l,r,i=t[3].romaji+"",s;return{c(){e=f("div"),a=z(n),l=g(),r=f("div"),s=z(i),d(e,"class","kana svelte-1i5705a"),d(r,"class","romaji svelte-1i5705a")},m(u,c){M(u,e,c),o(e,a),M(u,l,c),M(u,r,c),o(r,s)},p(u,c){c&8&&n!==(n=u[3].kana+"")&&P(a,n),c&8&&i!==(i=u[3].romaji+"")&&P(s,i)},d(u){u&&(E(e),E(l),E(r))}}}function En(t){let e,n,a;return{c(){e=f("span"),e.textContent="play_arrow",n=g(),a=f("span"),a.textContent="播放",d(e,"class","material-icons"),d(a,"class","tooltip-text svelte-1i5705a")},m(l,r){M(l,e,r),M(l,n,r),M(l,a,r)},d(l){l&&(E(e),E(n),E(a))}}}function Mn(t){let e,n,a;return{c(){e=f("span"),e.textContent="pause",n=g(),a=f("span"),a.textContent="暂停",d(e,"class","material-icons"),d(a,"class","tooltip-text svelte-1i5705a")},m(l,r){M(l,e,r),M(l,n,r),M(l,a,r)},d(l){l&&(E(e),E(n),E(a))}}}function On(t){let e,n,a;function l(s,u){return s[1].length>0&&s[3]?Cn:wn}let r=l(t),i=r(t);return{c(){e=f("div"),n=f("h2"),n.textContent="50音图播放",a=g(),i.c(),d(n,"class","svelte-1i5705a"),d(e,"class","play-container svelte-1i5705a")},m(s,u){M(s,e,u),o(e,n),o(e,a),i.m(e,null)},p(s,[u]){r===(r=l(s))&&i?i.p(s,u):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},i:N,o:N,d(s){s&&E(e),i.d()}}}function qn(t,e,n){let a,l=[],r=0,i=null,s=!1,u,c=!1;Oe(()=>{const S=ye.subscribe(R=>{n(0,a={...R}),m()});return()=>{S(),C()}}),Rt(()=>{C()});function m(){if(!a)return;const S=Ke(a.kanaType);a.playOrder==="random"?n(1,l=Ge(S)):n(1,l=[...S]),n(2,r=0),l.length>0&&(n(3,i=l[r]),n(4,s=!1))}function k(){i&&(chrome.runtime.sendMessage({action:"playAudio",romaji:i.romaji}),setTimeout(()=>{n(4,s=!0)},1e3))}function y(){n(4,s=!1),n(2,r=(r+1)%l.length),n(3,i=l[r]),k()}function w(){c||l.length===0||(n(5,c=!0),k(),u=setInterval(()=>{y()},a.playInterval*1e3))}function C(){c&&(n(5,c=!1),u&&(clearInterval(u),u=null))}function T(){c?C():w()}function O(){i&&chrome.runtime.sendMessage({action:"playAudio",romaji:i.romaji})}return[a,l,r,i,s,c,y,T,O]}class In extends ue{constructor(e){super(),re(this,e,qn,On,se,{})}}function kt(t,e,n){const a=t.slice();return a[21]=e[n],a}function _t(t){let e,n,a,l,r,i,s,u;return{c(){e=f("div"),n=f("p"),n.textContent="准备好测试你的日语50音图知识了吗？",a=g(),l=f("p"),l.textContent="你将听到假名的发音，然后从四个选项中选择正确的假名。",r=g(),i=f("button"),i.textContent="开始测试",d(n,"class","svelte-g9yspb"),d(l,"class","svelte-g9yspb"),d(i,"class","start-btn svelte-g9yspb"),d(e,"class","start-screen svelte-g9yspb")},m(c,m){M(c,e,m),o(e,n),o(e,a),o(e,l),o(e,r),o(e,i),s||(u=Q(i,"click",t[10]),s=!0)},p:N,d(c){c&&E(e),s=!1,u()}}}function vt(t){let e,n,a,l,r,i,s,u,c,m,k,y,w,C,T,O,S,R,L=ne(t[2]),h=[];for(let _=0;_<L.length;_+=1)h[_]=ht(kt(t,L,_));return{c(){e=f("div"),n=f("div"),a=f("button"),a.innerHTML='<span class="material-icons svelte-g9yspb">volume_up</span>',l=g(),r=f("p"),r.textContent="请选择你听到的假名：",i=g(),s=f("div");for(let _=0;_<h.length;_+=1)h[_].c();u=g(),c=f("div"),m=f("div"),k=g(),y=f("div"),w=z("得分: "),C=z(t[5]),T=z(" / "),O=z(t[6]),d(a,"type","button"),d(a,"class","sound-icon svelte-g9yspb"),d(a,"aria-label","播放发音"),d(n,"class","question svelte-g9yspb"),d(s,"class","options svelte-g9yspb"),d(m,"class","progress svelte-g9yspb"),nt(m,"width",t[6]/(t[6]+t[0].length)*100+"%"),d(c,"class","progress-bar svelte-g9yspb"),d(y,"class","score svelte-g9yspb"),d(e,"class","question-container svelte-g9yspb")},m(_,v){M(_,e,v),o(e,n),o(n,a),o(n,l),o(n,r),o(e,i),o(e,s);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(s,null);o(e,u),o(e,c),o(c,m),o(e,k),o(e,y),o(y,w),o(y,C),o(y,T),o(y,O),S||(R=[Q(a,"click",t[11]),Q(a,"keydown",t[14])],S=!0)},p(_,v){if(v&4124){L=ne(_[2]);let b;for(b=0;b<L.length;b+=1){const p=kt(_,L,b);h[b]?h[b].p(p,v):(h[b]=ht(p),h[b].c(),h[b].m(s,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=L.length}v&65&&nt(m,"width",_[6]/(_[6]+_[0].length)*100+"%"),v&32&&P(C,_[5]),v&64&&P(O,_[6])},d(_){_&&E(e),Me(h,_),S=!1,x(R)}}}function ht(t){let e,n=t[21].kana+"",a,l,r,i,s,u;function c(){return t[15](t[21])}return{c(){e=f("button"),a=z(n),l=g(),d(e,"class",r="option-btn "+(t[3]===t[21]?t[4]?"correct":"incorrect":"")+" svelte-g9yspb"),e.disabled=i=t[3]!==null},m(m,k){M(m,e,k),o(e,a),o(e,l),s||(u=Q(e,"click",c),s=!0)},p(m,k){t=m,k&4&&n!==(n=t[21].kana+"")&&P(a,n),k&28&&r!==(r="option-btn "+(t[3]===t[21]?t[4]?"correct":"incorrect":"")+" svelte-g9yspb")&&d(e,"class",r),k&8&&i!==(i=t[3]!==null)&&(e.disabled=i)},d(m){m&&E(e),s=!1,u()}}}function bt(t){let e,n,a,l,r,i,s,u,c=t[9].score+"",m,k,y=t[9].totalQuestions+"",w,C,T,O,S,R,L=t[9].accuracy.toFixed(1)+"",h,_,v,b,p,j,q,I=t[9].duration+"",A,H,W,B,V,F,K,X=t[9].kanaType==="hiragana"?"平假名":t[9].kanaType==="katakana"?"片假名":"全部",G,ee,Y,te,Z;return{c(){e=f("div"),n=f("h3"),n.textContent="测试完成！",a=g(),l=f("div"),r=f("div"),i=f("span"),i.textContent="得分:",s=g(),u=f("strong"),m=z(c),k=z(" / "),w=z(y),C=g(),T=f("div"),O=f("span"),O.textContent="正确率:",S=g(),R=f("strong"),h=z(L),_=z("%"),v=g(),b=f("div"),p=f("span"),p.textContent="用时:",j=g(),q=f("strong"),A=z(I),H=z("秒"),W=g(),B=f("div"),V=f("span"),V.textContent="假名类型:",F=g(),K=f("strong"),G=z(X),ee=g(),Y=f("button"),Y.textContent="再次测试",d(r,"class","result-item svelte-g9yspb"),d(T,"class","result-item svelte-g9yspb"),d(b,"class","result-item svelte-g9yspb"),d(B,"class","result-item svelte-g9yspb"),d(l,"class","result-card svelte-g9yspb"),d(Y,"class","restart-btn svelte-g9yspb"),d(e,"class","result-container svelte-g9yspb")},m($,J){M($,e,J),o(e,n),o(e,a),o(e,l),o(l,r),o(r,i),o(r,s),o(r,u),o(u,m),o(u,k),o(u,w),o(l,C),o(l,T),o(T,O),o(T,S),o(T,R),o(R,h),o(R,_),o(l,v),o(l,b),o(b,p),o(b,j),o(b,q),o(q,A),o(q,H),o(l,W),o(l,B),o(B,V),o(B,F),o(B,K),o(K,G),o(e,ee),o(e,Y),te||(Z=Q(Y,"click",t[13]),te=!0)},p($,J){J&512&&c!==(c=$[9].score+"")&&P(m,c),J&512&&y!==(y=$[9].totalQuestions+"")&&P(w,y),J&512&&L!==(L=$[9].accuracy.toFixed(1)+"")&&P(h,L),J&512&&I!==(I=$[9].duration+"")&&P(A,I),J&512&&X!==(X=$[9].kanaType==="hiragana"?"平假名":$[9].kanaType==="katakana"?"片假名":"全部")&&P(G,X)},d($){$&&E(e),te=!1,Z()}}}function Sn(t){let e,n,a,l,r,i=!t[7]&&!t[8]&&_t(t),s=t[7]&&t[1]&&vt(t),u=t[8]&&t[9]&&bt(t);return{c(){e=f("div"),n=f("h2"),n.textContent="50音图测试",a=g(),i&&i.c(),l=g(),s&&s.c(),r=g(),u&&u.c(),d(n,"class","svelte-g9yspb"),d(e,"class","test-container svelte-g9yspb")},m(c,m){M(c,e,m),o(e,n),o(e,a),i&&i.m(e,null),o(e,l),s&&s.m(e,null),o(e,r),u&&u.m(e,null)},p(c,[m]){!c[7]&&!c[8]?i?i.p(c,m):(i=_t(c),i.c(),i.m(e,l)):i&&(i.d(1),i=null),c[7]&&c[1]?s?s.p(c,m):(s=vt(c),s.c(),s.m(e,r)):s&&(s.d(1),s=null),c[8]&&c[9]?u?u.p(c,m):(u=bt(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:N,o:N,d(c){c&&E(e),i&&i.d(),s&&s.d(),u&&u.d()}}}function Rn(t,e,n){let a,l=[],r=null,i=[],s=null,u=null,c=0,m=0,k=null,y=null,w=!1,C=!1,T=null;Oe(()=>{const p=ye.subscribe(j=>{a={...j}});return()=>{p()}});function O(){const p=Ke(a.kanaType);n(0,l=Ge(p)),n(5,c=0),n(6,m=0),k=new Date,y=null,n(7,w=!0),n(8,C=!1),n(9,T=null),S()}function S(){if(l.length===0){h();return}n(1,r=l.shift());const p=Ke(a.kanaType);n(2,i=Ft(r,p)),n(3,s=null),n(4,u=null),R()}function R(){r&&chrome.runtime.sendMessage({action:"playAudio",romaji:r.romaji})}function L(p){s===null&&(n(3,s=p),n(4,u=p.kana===r.kana),u?n(5,c++,c):pn(r),n(6,m++,m),setTimeout(()=>{S()},1500))}function h(){n(7,w=!1),n(8,C=!0),y=new Date;const p=Math.round((y.getTime()-k.getTime())/1e3),j=m>0?c/m*100:0;n(9,T={score:c,totalQuestions:m,accuracy:j,duration:p,kanaType:a.kanaType}),_n(T)}function _(){O()}return[l,r,i,s,u,c,m,w,C,T,O,R,L,_,p=>p.key==="Enter"&&R(),p=>L(p)]}class Ln extends ue{constructor(e){super(),re(this,e,Rn,Sn,se,{})}}function jt(t,e,n){const a=t.slice();return a[10]=e[n],a[12]=n,a}function Pn(t){let e;return{c(){e=f("div"),e.innerHTML='<p class="svelte-vu8w8a">还没有测试记录</p> <p class="svelte-vu8w8a">完成一次测试后，结果将显示在这里</p>',d(e,"class","empty-state svelte-vu8w8a")},m(n,a){M(n,e,a)},p:N,d(n){n&&E(e)}}}function An(t){let e,n,a,l=t[1]==="accuracy"?t[2]==="asc"?"↑":"↓":"",r,i,s,u,c,m=t[1]==="duration"?t[2]==="asc"?"↑":"↓":"",k,y,w,C,T,O=t[1]==="date"?t[2]==="asc"?"↑":"↓":"",S,R,L,h,_,v,b=ne(t[0]),p=[];for(let j=0;j<b.length;j+=1)p[j]=gt(jt(t,b,j));return{c(){e=f("div"),n=f("button"),a=z("按正确率排序 "),r=z(l),s=g(),u=f("button"),c=z("按用时排序 "),k=z(m),w=g(),C=f("button"),T=z("按日期排序 "),S=z(O),L=g(),h=f("div");for(let j=0;j<p.length;j+=1)p[j].c();d(n,"class",i=ke(t[1]==="accuracy"?"active":"")+" svelte-vu8w8a"),d(u,"class",y=ke(t[1]==="duration"?"active":"")+" svelte-vu8w8a"),d(C,"class",R=ke(t[1]==="date"?"active":"")+" svelte-vu8w8a"),d(e,"class","sort-controls svelte-vu8w8a"),d(h,"class","results-list svelte-vu8w8a")},m(j,q){M(j,e,q),o(e,n),o(n,a),o(n,r),o(e,s),o(e,u),o(u,c),o(u,k),o(e,w),o(e,C),o(C,T),o(C,S),M(j,L,q),M(j,h,q);for(let I=0;I<p.length;I+=1)p[I]&&p[I].m(h,null);_||(v=[Q(n,"click",t[5]),Q(u,"click",t[6]),Q(C,"click",t[7])],_=!0)},p(j,q){if(q&6&&l!==(l=j[1]==="accuracy"?j[2]==="asc"?"↑":"↓":"")&&P(r,l),q&2&&i!==(i=ke(j[1]==="accuracy"?"active":"")+" svelte-vu8w8a")&&d(n,"class",i),q&6&&m!==(m=j[1]==="duration"?j[2]==="asc"?"↑":"↓":"")&&P(k,m),q&2&&y!==(y=ke(j[1]==="duration"?"active":"")+" svelte-vu8w8a")&&d(u,"class",y),q&6&&O!==(O=j[1]==="date"?j[2]==="asc"?"↑":"↓":"")&&P(S,O),q&2&&R!==(R=ke(j[1]==="date"?"active":"")+" svelte-vu8w8a")&&d(C,"class",R),q&17){b=ne(j[0]);let I;for(I=0;I<b.length;I+=1){const A=jt(j,b,I);p[I]?p[I].p(A,q):(p[I]=gt(A),p[I].c(),p[I].m(h,null))}for(;I<p.length;I+=1)p[I].d(1);p.length=b.length}},d(j){j&&(E(e),E(L),E(h)),Me(p,j),_=!1,x(v)}}}function gt(t){let e,n,a,l=yt(t[10].timestamp)+"",r,i,s,u,c,m,k,y,w,C=t[10].score+"",T,O,S=t[10].totalQuestions+"",R,L,h,_,v,b,p=t[10].accuracy.toFixed(1)+"",j,q,I,A,H,W,B,V=t[10].duration+"",F,K,X,G,ee,Y,te,Z=wt(t[10].kanaType)+"",$,J,pe,we;function Ie(){return t[8](t[12])}return{c(){e=f("div"),n=f("div"),a=f("span"),r=z(l),i=g(),s=f("button"),s.innerHTML='<span class="material-icons">delete</span>',u=g(),c=f("div"),m=f("div"),k=f("span"),k.textContent="得分:",y=g(),w=f("strong"),T=z(C),O=z(" / "),R=z(S),L=g(),h=f("div"),_=f("span"),_.textContent="正确率:",v=g(),b=f("strong"),j=z(p),q=z("%"),I=g(),A=f("div"),H=f("span"),H.textContent="用时:",W=g(),B=f("strong"),F=z(V),K=z("秒"),X=g(),G=f("div"),ee=f("span"),ee.textContent="假名类型:",Y=g(),te=f("strong"),$=z(Z),J=g(),d(a,"class","date svelte-vu8w8a"),d(s,"class","delete-btn svelte-vu8w8a"),d(n,"class","result-header svelte-vu8w8a"),d(m,"class","result-item svelte-vu8w8a"),d(b,"class","accuracy svelte-vu8w8a"),d(h,"class","result-item svelte-vu8w8a"),d(A,"class","result-item svelte-vu8w8a"),d(G,"class","result-item svelte-vu8w8a"),d(c,"class","result-details svelte-vu8w8a"),d(e,"class","result-card svelte-vu8w8a")},m(D,U){M(D,e,U),o(e,n),o(n,a),o(a,r),o(n,i),o(n,s),o(e,u),o(e,c),o(c,m),o(m,k),o(m,y),o(m,w),o(w,T),o(w,O),o(w,R),o(c,L),o(c,h),o(h,_),o(h,v),o(h,b),o(b,j),o(b,q),o(c,I),o(c,A),o(A,H),o(A,W),o(A,B),o(B,F),o(B,K),o(c,X),o(c,G),o(G,ee),o(G,Y),o(G,te),o(te,$),o(e,J),pe||(we=Q(s,"click",Ie),pe=!0)},p(D,U){t=D,U&1&&l!==(l=yt(t[10].timestamp)+"")&&P(r,l),U&1&&C!==(C=t[10].score+"")&&P(T,C),U&1&&S!==(S=t[10].totalQuestions+"")&&P(R,S),U&1&&p!==(p=t[10].accuracy.toFixed(1)+"")&&P(j,p),U&1&&V!==(V=t[10].duration+"")&&P(F,V),U&1&&Z!==(Z=wt(t[10].kanaType)+"")&&P($,Z)},d(D){D&&E(e),pe=!1,we()}}}function Dn(t){let e,n,a;function l(s,u){return s[0]&&s[0].length>0?An:Pn}let r=l(t),i=r(t);return{c(){e=f("div"),n=f("h2"),n.textContent="测试排名",a=g(),i.c(),d(n,"class","svelte-vu8w8a"),d(e,"class","rankings-container svelte-vu8w8a")},m(s,u){M(s,e,u),o(e,n),o(e,a),i.m(e,null)},p(s,[u]){r===(r=l(s))&&i?i.p(s,u):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},i:N,o:N,d(s){s&&E(e),i.d()}}}function yt(t){return new Date(t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function wt(t){switch(t){case"hiragana":return"平假名";case"katakana":return"片假名";case"both":return"全部";default:return t}}function Nn(t,e,n){let a=[],l="date",r="desc";Oe(()=>{const w=fe.subscribe(C=>{n(0,a=[...C]),i()});return()=>{w()}});function i(){!a||a.length===0||(a.sort((w,C)=>{let T=0;switch(l){case"accuracy":T=w.accuracy-C.accuracy;break;case"duration":T=w.duration-C.duration;break;case"date":default:T=w.timestamp-C.timestamp;break}return r==="asc"?T:-T}),n(0,a=[...a]))}function s(w){l===w?n(2,r=r==="asc"?"desc":"asc"):(n(1,l=w),n(2,r=w==="duration"?"asc":"desc")),i()}function u(w){confirm("确定要删除这条测试记录吗？")&&vn(a[w].timestamp)}return[a,l,r,s,u,()=>s("accuracy"),()=>s("duration"),()=>s("date"),w=>u(w)]}class Kn extends ue{constructor(e){super(),re(this,e,Nn,Dn,se,{})}}function Ct(t,e,n){const a=t.slice();return a[20]=e[n],a}function zt(t,e,n){const a=t.slice();return a[23]=e[n],a}function Tt(t){let e;function n(r,i){return r[1].length>0?Fn:Hn}let a=n(t),l=a(t);return{c(){e=f("div"),l.c(),d(e,"class","start-screen svelte-1ss6zvj")},m(r,i){M(r,e,i),l.m(e,null)},p(r,i){a===(a=n(r))&&l?l.p(r,i):(l.d(1),l=a(r),l&&(l.c(),l.m(e,null)))},d(r){r&&E(e),l.d()}}}function Hn(t){let e;return{c(){e=f("div"),e.innerHTML='<p class="svelte-1ss6zvj">恭喜！你没有错题需要复习</p> <p class="svelte-1ss6zvj">完成测试并出现错题后，可以在这里进行复习</p>',d(e,"class","empty-state svelte-1ss6zvj")},m(n,a){M(n,e,a)},p:N,d(n){n&&E(e)}}}function Fn(t){var b;let e,n,a=t[1].length+"",l,r,i,s,u,c=(((b=t[0])==null?void 0:b.requiredCorrectCount)||3)+"",m,k,y,w,C,T,O,S,R,L,h,_=ne(t[1]),v=[];for(let p=0;p<_.length;p+=1)v[p]=Et(zt(t,_,p));return{c(){e=f("p"),n=z("你有 "),l=z(a),r=z(" 个错题需要复习"),i=g(),s=f("p"),u=z("连续答对 "),m=z(c),k=z(" 次后，错题将从错题库中移除"),y=g(),w=f("button"),w.textContent="开始复习",C=g(),T=f("div"),O=f("h3"),O.textContent="错题列表",S=g(),R=f("div");for(let p=0;p<v.length;p+=1)v[p].c();d(e,"class","svelte-1ss6zvj"),d(s,"class","svelte-1ss6zvj"),d(w,"class","start-btn svelte-1ss6zvj"),d(O,"class","svelte-1ss6zvj"),d(R,"class","mistakes-grid svelte-1ss6zvj"),d(T,"class","mistakes-list svelte-1ss6zvj")},m(p,j){M(p,e,j),o(e,n),o(e,l),o(e,r),M(p,i,j),M(p,s,j),o(s,u),o(s,m),o(s,k),M(p,y,j),M(p,w,j),M(p,C,j),M(p,T,j),o(T,O),o(T,S),o(T,R);for(let q=0;q<v.length;q+=1)v[q]&&v[q].m(R,null);L||(h=Q(w,"click",t[11]),L=!0)},p(p,j){var q;if(j&2&&a!==(a=p[1].length+"")&&P(l,a),j&1&&c!==(c=(((q=p[0])==null?void 0:q.requiredCorrectCount)||3)+"")&&P(m,c),j&32770){_=ne(p[1]);let I;for(I=0;I<_.length;I+=1){const A=zt(p,_,I);v[I]?v[I].p(A,j):(v[I]=Et(A),v[I].c(),v[I].m(R,null))}for(;I<v.length;I+=1)v[I].d(1);v.length=_.length}},d(p){p&&(E(e),E(i),E(s),E(y),E(w),E(C),E(T)),Me(v,p),L=!1,h()}}}function Et(t){let e,n,a=t[23].kana+"",l,r,i,s=t[23].romaji+"",u,c,m,k,y=t[15](t[23].kana)+"",w,C,T;return{c(){e=f("div"),n=f("div"),l=z(a),r=g(),i=f("div"),u=z(s),c=g(),m=f("div"),k=z("还需正确: "),w=z(y),C=z(" 次"),T=g(),d(n,"class","mistake-kana svelte-1ss6zvj"),d(i,"class","mistake-romaji svelte-1ss6zvj"),d(m,"class","mistake-progress svelte-1ss6zvj"),d(e,"class","mistake-item svelte-1ss6zvj")},m(O,S){M(O,e,S),o(e,n),o(n,l),o(e,r),o(e,i),o(i,u),o(e,c),o(e,m),o(m,k),o(m,w),o(m,C),o(e,T)},p(O,S){S&2&&a!==(a=O[23].kana+"")&&P(l,a),S&2&&s!==(s=O[23].romaji+"")&&P(u,s),S&2&&y!==(y=O[15](O[23].kana)+"")&&P(w,y)},d(O){O&&E(e)}}}function Mt(t){let e,n,a,l,r,i,s,u,c,m,k,y=(t[7]>0?Math.round(t[6]/t[7]*100):0)+"",w,C,T,O,S,R,L,h,_=ne(t[3]),v=[];for(let p=0;p<_.length;p+=1)v[p]=Ot(Ct(t,_,p));let b=t[4]&&t[5]!==null&&qt(t);return{c(){e=f("div"),n=f("div"),a=f("button"),a.innerHTML='<span class="material-icons svelte-1ss6zvj">volume_up</span>',l=g(),r=f("p"),r.textContent="请选择你听到的假名：",i=g(),s=f("div");for(let p=0;p<v.length;p+=1)v[p].c();u=g(),b&&b.c(),c=g(),m=f("div"),k=z("正确率: "),w=z(y),C=z(`%
        (`),T=z(t[6]),O=z(" / "),S=z(t[7]),R=z(")"),d(a,"type","button"),d(a,"class","sound-icon svelte-1ss6zvj"),d(a,"aria-label","播放发音"),d(n,"class","question svelte-1ss6zvj"),d(s,"class","options svelte-1ss6zvj"),d(m,"class","score svelte-1ss6zvj"),d(e,"class","question-container svelte-1ss6zvj")},m(p,j){M(p,e,j),o(e,n),o(n,a),o(n,l),o(n,r),o(e,i),o(e,s);for(let q=0;q<v.length;q+=1)v[q]&&v[q].m(s,null);o(e,u),b&&b.m(e,null),o(e,c),o(e,m),o(m,k),o(m,w),o(m,C),o(m,T),o(m,O),o(m,S),o(m,R),L||(h=[Q(a,"click",t[12]),Q(a,"keydown",t[16])],L=!0)},p(p,j){if(j&8248){_=ne(p[3]);let q;for(q=0;q<_.length;q+=1){const I=Ct(p,_,q);v[q]?v[q].p(I,j):(v[q]=Ot(I),v[q].c(),v[q].m(s,null))}for(;q<v.length;q+=1)v[q].d(1);v.length=_.length}p[4]&&p[5]!==null?b?b.p(p,j):(b=qt(p),b.c(),b.m(e,c)):b&&(b.d(1),b=null),j&192&&y!==(y=(p[7]>0?Math.round(p[6]/p[7]*100):0)+"")&&P(w,y),j&64&&P(T,p[6]),j&128&&P(S,p[7])},d(p){p&&E(e),Me(v,p),b&&b.d(),L=!1,x(h)}}}function Ot(t){let e,n=t[20].kana+"",a,l,r,i,s,u;function c(){return t[17](t[20])}return{c(){e=f("button"),a=z(n),l=g(),d(e,"class",r="option-btn "+(t[4]===t[20]?t[5]?"correct":"incorrect":"")+" svelte-1ss6zvj"),e.disabled=i=t[4]!==null},m(m,k){M(m,e,k),o(e,a),o(e,l),s||(u=Q(e,"click",c),s=!0)},p(m,k){t=m,k&8&&n!==(n=t[20].kana+"")&&P(a,n),k&56&&r!==(r="option-btn "+(t[4]===t[20]?t[5]?"correct":"incorrect":"")+" svelte-1ss6zvj")&&d(e,"class",r),k&16&&i!==(i=t[4]!==null)&&(e.disabled=i)},d(m){m&&E(e),s=!1,u()}}}function qt(t){let e;function n(r,i){return r[5]?$n:Qn}let a=n(t),l=a(t);return{c(){e=f("div"),l.c(),d(e,"class","feedback svelte-1ss6zvj")},m(r,i){M(r,e,i),l.m(e,null)},p(r,i){a===(a=n(r))&&l?l.p(r,i):(l.d(1),l=a(r),l&&(l.c(),l.m(e,null)))},d(r){r&&E(e),l.d()}}}function Qn(t){let e,n,a,l,r,i=t[2].kana+"",s;return{c(){e=f("div"),n=f("span"),n.textContent="error",a=g(),l=f("span"),r=z("错误，正确答案是: "),s=z(i),d(n,"class","material-icons"),d(e,"class","incorrect-feedback svelte-1ss6zvj")},m(u,c){M(u,e,c),o(e,n),o(e,a),o(e,l),o(l,r),o(l,s)},p(u,c){c&4&&i!==(i=u[2].kana+"")&&P(s,i)},d(u){u&&E(e)}}}function $n(t){let e,n,a,l,r,i=t[8][t[2].kana]+"",s,u,c=t[0].requiredCorrectCount+"",m;return{c(){e=f("div"),n=f("span"),n.textContent="check_circle",a=g(),l=f("span"),r=z("正确！连续正确: "),s=z(i),u=z(" / "),m=z(c),d(n,"class","material-icons"),d(e,"class","correct-feedback svelte-1ss6zvj")},m(k,y){M(k,e,y),o(e,n),o(e,a),o(e,l),o(l,r),o(l,s),o(l,u),o(l,m)},p(k,y){y&260&&i!==(i=k[8][k[2].kana]+"")&&P(s,i),y&1&&c!==(c=k[0].requiredCorrectCount+"")&&P(m,c)},d(k){k&&E(e)}}}function It(t){let e,n,a,l,r,i,s,u,c,m,k,y,w,C,T,O,S,R,L,h,_=(t[7]>0?Math.round(t[6]/t[7]*100):0)+"",v,b,p;function j(A,H){return A[1].length>0?Bn:Un}let q=j(t),I=q(t);return{c(){e=f("div"),n=f("h3"),n.textContent="复习完成！",a=g(),l=f("div"),r=f("div"),i=f("span"),i.textContent="总题数:",s=g(),u=f("strong"),c=z(t[7]),m=g(),k=f("div"),y=f("span"),y.textContent="正确数:",w=g(),C=f("strong"),T=z(t[6]),O=g(),S=f("div"),R=f("span"),R.textContent="正确率:",L=g(),h=f("strong"),v=z(_),b=z("%"),p=g(),I.c(),d(r,"class","result-item svelte-1ss6zvj"),d(k,"class","result-item svelte-1ss6zvj"),d(S,"class","result-item svelte-1ss6zvj"),d(l,"class","result-card svelte-1ss6zvj"),d(e,"class","result-container svelte-1ss6zvj")},m(A,H){M(A,e,H),o(e,n),o(e,a),o(e,l),o(l,r),o(r,i),o(r,s),o(r,u),o(u,c),o(l,m),o(l,k),o(k,y),o(k,w),o(k,C),o(C,T),o(l,O),o(l,S),o(S,R),o(S,L),o(S,h),o(h,v),o(h,b),o(e,p),I.m(e,null)},p(A,H){H&128&&P(c,A[7]),H&64&&P(T,A[6]),H&192&&_!==(_=(A[7]>0?Math.round(A[6]/A[7]*100):0)+"")&&P(v,_),q===(q=j(A))&&I?I.p(A,H):(I.d(1),I=q(A),I&&(I.c(),I.m(e,null)))},d(A){A&&E(e),I.d()}}}function Un(t){let e;return{c(){e=f("div"),e.innerHTML='<span class="material-icons svelte-1ss6zvj">celebration</span> <p>恭喜！你已经掌握了所有的错题</p>',d(e,"class","success-message svelte-1ss6zvj")},m(n,a){M(n,e,a)},p:N,d(n){n&&E(e)}}}function Bn(t){let e,n,a=t[1].length+"",l,r,i,s,u,c;return{c(){e=f("p"),n=z("你还有 "),l=z(a),r=z(" 个错题需要继续复习"),i=g(),s=f("button"),s.textContent="继续复习",d(s,"class","restart-btn svelte-1ss6zvj")},m(m,k){M(m,e,k),o(e,n),o(e,l),o(e,r),M(m,i,k),M(m,s,k),u||(c=Q(s,"click",t[14]),u=!0)},p(m,k){k&2&&a!==(a=m[1].length+"")&&P(l,a)},d(m){m&&(E(e),E(i),E(s)),u=!1,c()}}}function Xn(t){let e,n,a,l,r,i=!t[9]&&!t[10]&&Tt(t),s=t[9]&&t[2]&&Mt(t),u=t[10]&&It(t);return{c(){e=f("div"),n=f("h2"),n.textContent="错题复习",a=g(),i&&i.c(),l=g(),s&&s.c(),r=g(),u&&u.c(),d(n,"class","svelte-1ss6zvj"),d(e,"class","review-container svelte-1ss6zvj")},m(c,m){M(c,e,m),o(e,n),o(e,a),i&&i.m(e,null),o(e,l),s&&s.m(e,null),o(e,r),u&&u.m(e,null)},p(c,[m]){!c[9]&&!c[10]?i?i.p(c,m):(i=Tt(c),i.c(),i.m(e,l)):i&&(i.d(1),i=null),c[9]&&c[2]?s?s.p(c,m):(s=Mt(c),s.c(),s.m(e,r)):s&&(s.d(1),s=null),c[10]?u?u.p(c,m):(u=It(c),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:N,o:N,d(c){c&&E(e),i&&i.d(),s&&s.d(),u&&u.d()}}}function Yn(t,e,n){let a,l=[],r=null,i=[],s=null,u=null,c=0,m=0,k={},y=!1,w=!1;Oe(()=>{const b=ye.subscribe(j=>{n(0,a={...j})}),p=oe.subscribe(j=>{n(1,l=[...j]),l.length>0&&Object.keys(k).length===0&&l.forEach(q=>{n(8,k[q.kana]=0,k)})});return()=>{b(),p()}});function C(){l.length!==0&&(n(9,y=!0),n(10,w=!1),n(7,m=0),n(6,c=0),T())}function T(){if(l.length===0){R();return}const b=Math.floor(Math.random()*l.length);n(2,r=l[b]);const p=Ke(a.kanaType);n(3,i=Ft(r,p)),n(4,s=null),n(5,u=null),O()}function O(){r&&chrome.runtime.sendMessage({action:"playAudio",romaji:r.romaji})}function S(b){s===null&&(n(4,s=b),n(5,u=b.kana===r.kana),n(7,m++,m),u?(n(6,c++,c),n(8,k[r.kana]=(k[r.kana]||0)+1,k),k[r.kana]>=a.requiredCorrectCount&&setTimeout(()=>{kn(r),delete k[r.kana]},1e3)):n(8,k[r.kana]=0,k),setTimeout(()=>{T()},1500))}function R(){n(9,y=!1),n(10,w=!0)}function L(){C()}function h(b){const p=k[b]||0;return Math.max(0,a.requiredCorrectCount-p)}return[a,l,r,i,s,u,c,m,k,y,w,C,O,S,L,h,b=>b.key==="Enter"&&O(),b=>S(b)]}class Vn extends ue{constructor(e){super(),re(this,e,Yn,Xn,se,{})}}function Wn(t){let e,n,a,l,r,i;return n=new fn({}),r=new rn({props:{routes:t[0]}}),{c(){e=f("main"),ge(n.$$.fragment),a=g(),l=f("div"),ge(r.$$.fragment),d(l,"class","content svelte-b4ft05"),d(e,"class","svelte-b4ft05")},m(s,u){M(s,e,u),me(n,e,null),o(e,a),o(e,l),me(r,l,null),i=!0},p:N,i(s){i||(le(n.$$.fragment,s),le(r.$$.fragment,s),i=!0)},o(s){ie(n.$$.fragment,s),ie(r.$$.fragment,s),i=!1},d(s){s&&E(e),de(n),de(r)}}}function Gn(t){return[{"/":Ce({component:yn}),"/play":Ce({component:In}),"/test":Ce({component:Ln}),"/ranking":Ce({component:Kn}),"/review":Ce({component:Vn})}]}class Jn extends ue{constructor(e){super(),re(this,e,Gn,Wn,se,{})}}new Jn({target:document.getElementById("app")});
